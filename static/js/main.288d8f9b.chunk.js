(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{115:function(t,e,n){t.exports={appWrapper:"App_appWrapper__1y6-z"}},120:function(t,e,n){t.exports=n(247)},125:function(t,e,n){},247:function(t,e,n){"use strict";n.r(e);var o=n(0),a=n.n(o),i=n(50),s=n.n(i);n(125),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var r=n(5),c=n(80),l=n(6),d=n(111),u=n.n(d).a.create({baseURL:"https://social-network.samuraijs.com/api/1.0",withCredentials:!0,headers:{"API-KEY":"2a70584b-20f7-4ff5-8c15-684fb9f4be7b"}}),p={createTask:function(t,e){return u.post("/todo-lists/".concat(e,"/tasks"),{title:t})},getTasks:function(t){return u.get("/todo-lists/".concat(t,"/tasks"))},updateTask:function(t,e){return u.put("/todo-lists/tasks",Object(l.a)({},t,{},e))},deleteTask:function(t){return u.delete("/todo-lists/tasks/".concat(t))},deleteTodolist:function(t){return u.delete("/todo-lists/".concat(t))},getTodolists:function(){return u.get("/todo-lists")},createTodolists:function(t){return u.post("/todo-lists",{title:t})},updateTodolist:function(t,e){return u.put("/todo-lists/".concat(t),{title:e})}},m=function(){return u.get("/auth/me").then(function(t){return t.data})},f=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return u.post("/auth/login",{email:t,password:e,rememberMe:n}).then(function(t){return t.data})},T=function(){return u.delete("/auth/login").then(function(t){return t.data})},h="TodoList/Reducer/ADD_TASK",k={todolists:[]},E=function(t,e){return function(n){p.createTask(t,e).then(function(t){var o=t.data.data.item;n(function(t,e){return{type:h,newTask:t,todolistId:e}}(o,e))})}},v=n(250),g=n(112),b=function(t,e,n,o){return{type:"TodoList/Reducer/SET_AUTH_USER_DATA",payload:{userId:t,email:e,login:n,isAuth:o}}},_={userId:null,email:null,login:null,isAuth:!1},O=function(){return function(t){m().then(function(e){if(0===e.resultCode){var n=e.data,o=n.id,a=n.email,i=n.login;t(b(o,a,i,!0))}})}},L=Object(r.c)({reducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"TodoList/Reducer/ADD_TODOLIST":return Object(l.a)({},t,{todolists:[].concat(Object(c.a)(t.todolists),[e.newTodoList])});case"TodoList/Reducer/SET_TODOLISTS":return Object(l.a)({},t,{todolists:e.todolists.map(function(t){return Object(l.a)({},t,{tasks:[]})})});case"TodoList/Reducer/DELETE_TODOLIST":return Object(l.a)({},t,{todolists:t.todolists.filter(function(t){return t.id!==e.todolistId})});case h:return Object(l.a)({},t,{todolists:t.todolists.map(function(t){return t.id===e.todolistId?Object(l.a)({},t,{tasks:[].concat(Object(c.a)(t.tasks),[e.newTask])}):t})});case"TodoList/Reducer/SET_TASKS":return Object(l.a)({},t,{todolists:t.todolists.map(function(t){return t.id===e.todolistId?Object(l.a)({},t,{tasks:e.tasks}):t})});case"TodoList/Reducer/CHANGE_TASK":return Object(l.a)({},t,{todolists:t.todolists.map(function(t){return t.id===e.todolistId?Object(l.a)({},t,{tasks:t.tasks.map(function(t){return t.id===e.taskId?Object(l.a)({},t,{},e.obj):t})}):t})});case"TodoList/Reducer/CHANGE_TODOLIST":return Object(l.a)({},t,{todolists:t.todolists.map(function(t){return t.id===e.todolistId?Object(l.a)({},t):t})});case"TodoList/Reducer/DELETE_TASK":return Object(l.a)({},t,{todolists:t.todolists.map(function(t){return t.id===e.todolistId?Object(l.a)({},t,{tasks:t.tasks.filter(function(t){return t.id!==e.taskId})}):t})});default:return t}},auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"TodoList/Reducer/SET_AUTH_USER_DATA":return Object(l.a)({},t,{},e.payload);default:return t}},form:v.a}),j=Object(r.d)(L,Object(r.a)(g.a));window.store=j;var A=j,C=n(14),S=n(7),I=n(9),w=n(8),N=n(10),D=n(115),y=n.n(D),F=n(38),H=n.n(F),M=n(249),R=n(248),x=function(t){if(!t)return"Field is required"},K=function(t){return function(e){if(e.length>t)return"Max length is ".concat(t," symbols")}},V=n(116),U=n(73),B=n.n(U),P=function(t){var e=t.input,n=t.meta,o=Object(V.a)(t,["input","meta"]),i=n.touched&&n.error;return a.a.createElement("div",{className:B.a.formControl+" "+(i&&B.a.error)},a.a.createElement("input",Object.assign({},e,o)),i&&a.a.createElement("span",null,n.error))},W=n(23),G=K(20),Y=K(40),J=Object(R.a)({form:"login"})(function(t){return a.a.createElement("form",{onSubmit:t.handleSubmit,className:H.a.loginForm},a.a.createElement(M.a,{component:P,name:"email",placeholder:"Email",validate:[x,Y]}),a.a.createElement(M.a,{component:P,name:"password",type:"password",placeholder:"Password",validate:[x,G]}),a.a.createElement("div",null,a.a.createElement(M.a,{component:P,type:"checkbox",name:"rememberMe"}),"remember me"),a.a.createElement("button",null,"Login"))}),Z=Object(C.b)(function(t){return{isAuth:t.auth.isAuth}},{login:function(t,e,n){return function(o){f(t,e,n).then(function(t){0===t.resultCode&&o(O())})}}})(function(t){return t.isAuth?a.a.createElement(W.a,{to:"/todolist"}):a.a.createElement("div",{className:H.a.login},a.a.createElement("div",{className:H.a.loginTitle},"Login"),a.a.createElement(J,{onSubmit:function(e){t.login(e.email,e.password,e.rememberMe)}}),a.a.createElement("div",{className:H.a.testData},"\u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0435 e-mail \u0438 password:",a.a.createElement("div",null,"E-mail: ",a.a.createElement("span",null,"free@samuraijs.com")),a.a.createElement("div",null,"Password: ",a.a.createElement("span",null,"free"))))}),z=n(29),Q=n(39),q=n.n(Q),X=n(40),$=n.n(X),tt=n(53),et=n.n(tt),nt=function(t){function e(t){var n;return Object(S.a)(this,e),(n=Object(I.a)(this,Object(w.a)(e).call(this,t))).state={editMode:!1,title:n.props.task.title},n.activateEditMode=function(){n.setState({editMode:!0})},n.deactiveEditMode=function(){n.props.changeTitle(n.props.task.id,n.state.title),n.setState({editMode:!1})},n.onIsDoneChanged=function(t){var e=t.currentTarget.checked?2:0;n.props.changeIsDoneStatus(n.props.task.id,e)},n.onTitleChanged=function(t){n.setState({title:t.currentTarget.value})},n.onDeleteTask=function(){n.props.deleteTask(n.props.task.id)},n.render=function(){var t=n.props.task.status?"".concat($.a.done):"";return a.a.createElement("div",{className:$.a.todoListTask},a.a.createElement("input",{type:"checkbox",id:"check",checked:2===n.props.task.status,onChange:n.onIsDoneChanged}),a.a.createElement("div",{className:$.a.todoListTaskItem},a.a.createElement("div",null,n.state.editMode?a.a.createElement("input",{onBlur:n.deactiveEditMode,onChange:n.onTitleChanged,autoFocus:!0,value:n.state.title}):a.a.createElement("span",{onClick:n.activateEditMode,className:t},n.props.task.title)),a.a.createElement("button",{className:$.a.todoListTaskDelete,onClick:n.onDeleteTask},a.a.createElement("img",{src:et.a,alt:"basket"}))))},n}return Object(N.a)(e,t),e}(a.a.Component),ot=function(t){function e(t){var n;return Object(S.a)(this,e),(n=Object(I.a)(this,Object(w.a)(e).call(this,t))).render=function(){var t=n.props.tasks.map(function(t){return a.a.createElement(nt,{key:t.id,task:t,changeIsDoneStatus:n.props.changeIsDoneStatus,changeTitle:n.props.changeTitle,deleteTask:n.props.deleteTask})});return a.a.createElement("div",null,t)},n}return Object(N.a)(e,t),e}(a.a.Component),at=n(41),it=n.n(at),st=function(t){function e(){var t,n;Object(S.a)(this,e);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return(n=Object(I.a)(this,(t=Object(w.a)(e)).call.apply(t,[this].concat(i)))).state={isHidden:!1},n.onAllFilterClick=function(){n.props.changeFilter("All")},n.onComplitedFilterClick=function(){n.props.changeFilter("Completed")},n.onActiveFilterClick=function(){n.props.changeFilter("Active")},n.onHideFilterClick=function(){n.setState({isHidden:!0})},n.onShowFilterClick=function(){n.setState({isHidden:!1})},n.render=function(){var t="All"===n.props.filterValue?"".concat(it.a.filterActive):"",e="Completed"===n.props.filterValue?"".concat(it.a.filterActive):"",o="Active"===n.props.filterValue?"".concat(it.a.filterActive):"";return a.a.createElement("div",{className:it.a.todoListFooter},!n.state.isHidden&&a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){n.onAllFilterClick()},className:t},"All"),a.a.createElement("button",{onClick:function(){n.onComplitedFilterClick()},className:e},"Completed"),a.a.createElement("button",{onClick:function(){n.onActiveFilterClick()},className:o},"Active")),!n.state.isHidden&&a.a.createElement("span",{onClick:function(){n.onHideFilterClick()}},"hide"),n.state.isHidden&&a.a.createElement("span",{onClick:function(){n.onShowFilterClick()}},"show"))},n}return Object(N.a)(e,t),e}(a.a.Component),rt=n(78),ct=n.n(rt),lt=function(t){function e(t){var n;return Object(S.a)(this,e),(n=Object(I.a)(this,Object(w.a)(e).call(this,t))).state={error:!1,title:""},n.onInputTextChange=function(t){n.setState({error:!1,title:t.currentTarget.value})},n.onAddNewItemTitle=function(){var t=n.state.title;n.setState({title:""}),""===t?n.setState({error:!0}):(n.setState({error:!1}),n.props.addNewTitle(t))},n.onPressEnter=function(t){"Enter"===t.key&&n.onAddNewItemTitle()},n.render=function(){var t=n.state.error?"error":"";return a.a.createElement("div",{className:ct.a.todoListHeader},a.a.createElement("div",{className:ct.a.todoListNewTaskForm},a.a.createElement("input",{type:"text",placeholder:"New item name",className:t,onChange:n.onInputTextChange,onKeyPress:n.onPressEnter,value:n.state.title}),a.a.createElement("button",{onClick:function(){n.onAddNewItemTitle()}},"Add")))},n}return Object(N.a)(e,t),e}(a.a.Component),dt=n(30),ut=n.n(dt),pt=n(79),mt=n.n(pt),ft=function(t){function e(t){var n;return Object(S.a)(this,e),(n=Object(I.a)(this,Object(w.a)(e).call(this,t))).state={title:n.props.title,editMode:!1},n.activeEditMode=function(){n.setState({editMode:!0})},n.deactiveEditMode=function(){n.props.changeTodolist(n.props.id,n.state.title),n.setState({editMode:!1})},n.changeTodolistTitle=function(t){n.setState({title:t.currentTarget.value})},n.render=function(){return a.a.createElement("div",null,n.state.editMode?a.a.createElement("input",{onBlur:n.deactiveEditMode,autoFocus:!0,value:n.state.title,onChange:n.changeTodolistTitle,className:mt.a.todolistTitleInput}):a.a.createElement("h3",{className:mt.a.todolistHeaderTitle,onClick:n.activeEditMode},n.state.title))},n}return Object(N.a)(e,t),e}(a.a.Component),Tt=function(t){function e(t){var n;return Object(S.a)(this,e),(n=Object(I.a)(this,Object(w.a)(e).call(this,t))).state={filterValue:"All",nextTaskId:3},n.restoreState=function(){n.props.loadTasks(n.props.id)},n.addTask=function(t){n.props.addTask(t,n.props.id)},n.changeFilter=function(t){n.setState({filterValue:t})},n.changeTask=function(t,e){n.props.tasks.forEach(function(o){o.id===t&&p.updateTask(o,e).then(function(o){n.props.changeTask(n.props.id,t,e)})})},n.changeTodolist=function(t,e){p.updateTodolist(n.props.id,e).then(function(t){n.props.changeTodolist(n.props.id,n.props.title)})},n.changeIsDoneStatus=function(t,e){n.changeTask(t,{status:e})},n.changeTitle=function(t,e){n.changeTask(t,{title:e})},n.deleteTask=function(t){p.deleteTask(t).then(function(e){n.props.deleteTask(n.props.id,t)})},n.deleteTodolist=function(){p.deleteTodolist(n.props.id).then(function(t){n.props.deleteTodolist(n.props.id)})},n.render=function(){var t=n.props.tasks,e=void 0===t?[]:t;return a.a.createElement("div",{className:ut.a.App},a.a.createElement("div",{className:ut.a.todoList},a.a.createElement("div",{className:ut.a.todoListHeader},a.a.createElement(ft,{title:n.props.title,changeTodolist:n.changeTodolist}),a.a.createElement("button",{onClick:function(){n.deleteTodolist()},className:ut.a.todoListDeleteButton},a.a.createElement("img",{src:et.a,alt:"basket"}))),a.a.createElement(lt,{addNewTitle:n.addTask}),a.a.createElement("div",{className:ut.a.todoListContent},a.a.createElement(ot,{changeIsDoneStatus:n.changeIsDoneStatus,changeTitle:n.changeTitle,changeTask:n.changeTask,deleteTask:n.deleteTask,tasks:e.filter(function(t){return"All"===n.state.filterValue?2:"Active"===n.state.filterValue?0===t.status:2===t.status})})),a.a.createElement(st,{changeFilter:n.changeFilter,filterValue:n.state.filterValue})))},n}return Object(N.a)(e,t),Object(z.a)(e,[{key:"componentDidMount",value:function(){this.restoreState()}}]),e}(a.a.Component),ht=Object(C.b)(null,function(t){return{addTask:function(e,n){var o=E(e,n);t(o)},loadTasks:function(e){var n=function(t){return function(e){p.getTasks(t).then(function(n){var o=n.data.items;e(function(t,e){return{type:"TodoList/Reducer/SET_TASKS",tasks:t,todolistId:e}}(o,t))})}}(e);t(n)},changeTask:function(e,n,o){var a=function(t,e,n){return{type:"TodoList/Reducer/CHANGE_TASK",todolistId:t,taskId:e,obj:n}}(e,n,o);t(a)},deleteTodolist:function(e){var n=function(t){return{type:"TodoList/Reducer/DELETE_TODOLIST",todolistId:t}}(e);t(n)},deleteTask:function(e,n){var o=function(t,e){return{type:"TodoList/Reducer/DELETE_TASK",todolistId:t,taskId:e}}(e,n);t(o)},changeTodolist:function(e,n){var o=function(t,e){return{type:"TodoList/Reducer/CHANGE_TODOLIST",todolistId:t,newTodolistTitle:e}}(e,n);t(o)}}})(Tt),kt=function(t){function e(){var t,n;Object(S.a)(this,e);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(n=Object(I.a)(this,(t=Object(w.a)(e)).call.apply(t,[this].concat(a)))).state={newTodoListId:0},n.addNewTodolist=function(t){n.props.addTodolist(t)},n}return Object(N.a)(e,t),Object(z.a)(e,[{key:"render",value:function(){var t=this.props.todolists.map(function(t){return a.a.createElement(ht,{key:t.id,id:t.id,title:t.title,tasks:t.tasks})});return a.a.createElement("div",{className:q.a.item},a.a.createElement("div",{className:q.a.itemHeader},a.a.createElement(lt,{addNewTitle:this.addNewTodolist}),this.props.isAuth?a.a.createElement("div",null,this.props.login,a.a.createElement("div",{onClick:this.props.logout,className:q.a.logout},"logout")):a.a.createElement("div",null,"Login")),a.a.createElement("div",{className:q.a.App},t))}}]),e}(a.a.Component),Et=function(t){function e(){return Object(S.a)(this,e),Object(I.a)(this,Object(w.a)(e).apply(this,arguments))}return Object(N.a)(e,t),Object(z.a)(e,[{key:"componentDidMount",value:function(){this.props.setTodolists(),this.props.setAuthUserData()}},{key:"render",value:function(){return this.props.isAuth?a.a.createElement(kt,this.props):a.a.createElement(W.a,{to:"/login"})}}]),e}(a.a.Component),vt=Object(C.b)(function(t){return{todolists:t.reducer.todolists,isAuth:t.auth.isAuth,login:t.auth.login}},function(t){return{addTodolist:function(e){var n,o=(n=e,function(t){p.createTodolists(n).then(function(e){var n=e.data.data.item;t({type:"TodoList/Reducer/ADD_TODOLIST",newTodoList:n})})});t(o)},setTodolists:function(e){var n=function(t){p.getTodolists().then(function(e){t({type:"TodoList/Reducer/SET_TODOLISTS",todolists:e.data})})};t(n)},setAuthUserData:function(e,n,o){var a=O();t(a)},logout:function(){var e=function(t){T().then(function(e){0===e.resultCode&&t(b(null,null,null,!1))})};t(e)}}})(Et),gt=function(t){function e(){var t,n;Object(S.a)(this,e);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return(n=Object(I.a)(this,(t=Object(w.a)(e)).call.apply(t,[this].concat(i)))).render=function(){return a.a.createElement("div",{className:y.a.appWrapper},a.a.createElement(W.b,{path:"/login",render:function(){return a.a.createElement(Z,null)}}),a.a.createElement(W.b,{path:"/todolist",render:function(){return a.a.createElement(vt,null)}}))},n}return Object(N.a)(e,t),e}(a.a.Component),bt=n(34);s.a.render(a.a.createElement(C.a,{store:A},a.a.createElement(bt.a,null,a.a.createElement(gt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},30:function(t,e,n){t.exports={App:"TodoList_App__JRQZK",todoList:"TodoList_todoList__1d61V",todoListHeader:"TodoList_todoListHeader__1ISYI",todoListDeleteButton:"TodoList_todoListDeleteButton__3t31C",todoListContent:"TodoList_todoListContent__24YKH"}},38:function(t,e,n){t.exports={login:"Login_login__YlSvz",loginForm:"Login_loginForm__1o_uS",testData:"Login_testData__2CEyc"}},39:function(t,e,n){t.exports={App:"Item_App__cf8h7",error:"Item_error__1FKAG",itemHeader:"Item_itemHeader__2PhHp",logout:"Item_logout__3xmgV"}},40:function(t,e,n){t.exports={todoListTask:"TodoListTask_todoListTask__1U9ZW",done:"TodoListTask_done__1snSa",todoListTaskDelete:"TodoListTask_todoListTaskDelete__2hUsi",todoListTaskItem:"TodoListTask_todoListTaskItem__2KcQb"}},41:function(t,e,n){t.exports={filterActive:"TodoListFooter_filterActive__38KvZ"}},53:function(t,e,n){t.exports=n.p+"static/media/basket.491ecf80.svg"},73:function(t,e,n){t.exports={formControl:"FormControl_formControl__itaXp",error:"FormControl_error__1cbW_"}},78:function(t,e,n){t.exports={todoListNewTaskForm:"TodoListInputForm_todoListNewTaskForm__iy0Eg"}},79:function(t,e,n){}},[[120,1,2]]]);
//# sourceMappingURL=main.288d8f9b.chunk.js.map