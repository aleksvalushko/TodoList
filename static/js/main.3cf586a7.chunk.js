(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{114:function(t,e,n){t.exports={appWrapper:"App_appWrapper__1y6-z"}},118:function(t,e,n){t.exports=n(242)},123:function(t,e,n){},242:function(t,e,n){"use strict";n.r(e);var o=n(0),a=n.n(o),i=n(52),r=n.n(i);n(123),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=n(7),c=n(79),l=n(6),u=n(110),d=n.n(u).a.create({baseURL:"https://social-network.samuraijs.com/api/1.0",withCredentials:!0,headers:{"API-KEY":"2a70584b-20f7-4ff5-8c15-684fb9f4be7b"}}),p=function(t,e){return d.post("/todo-lists/".concat(e,"/tasks"),{title:t})},f=function(t){return d.get("/todo-lists/".concat(t,"/tasks"))},m=function(t,e){return d.put("/todo-lists/tasks",Object(l.a)({},t,{},e))},T=function(t){return d.delete("/todo-lists/tasks/".concat(t))},h=function(t){return d.delete("/todo-lists/".concat(t))},k=function(){return d.get("/todo-lists")},v=function(t){return d.post("/todo-lists",{title:t})},E=function(t,e){return d.put("/todo-lists/".concat(t),{title:e})},g=function(){return d.get("/auth/me").then(function(t){return t.data})},b=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return d.post("/auth/login",{email:t,password:e,rememberMe:n}).then(function(t){return t.data})},_=function(){return d.delete("/auth/login").then(function(t){return t.data})},L="TodoList/Reducer/ADD_TASK",O={todolists:[]},A=function(t,e){return function(n){p(t,e).then(function(t){var o=t.data.data.item;n(function(t,e){return{type:L,newTask:t,todolistId:e}}(o,e))})}},j=n(245),C=n(111),S=function(t,e,n,o){return{type:"TodoList/Reducer/SET_AUTH_USER_DATA",payload:{userId:t,email:e,login:n,isAuth:o}}},I={userId:null,email:null,login:null,isAuth:!1},w=function(){return function(t){g().then(function(e){if(0===e.resultCode){var n=e.data,o=n.id,a=n.email,i=n.login;t(S(o,a,i,!0))}})}},N=Object(s.c)({reducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"TodoList/Reducer/ADD_TODOLIST":return Object(l.a)({},t,{todolists:[].concat(Object(c.a)(t.todolists),[e.newTodoList])});case"TodoList/Reducer/SET_TODOLISTS":return Object(l.a)({},t,{todolists:e.todolists.map(function(t){return Object(l.a)({},t,{tasks:[]})})});case"TodoList/Reducer/DELETE_TODOLIST":return Object(l.a)({},t,{todolists:t.todolists.filter(function(t){return t.id!==e.todolistId})});case L:return Object(l.a)({},t,{todolists:t.todolists.map(function(t){return t.id===e.todolistId?Object(l.a)({},t,{tasks:[].concat(Object(c.a)(t.tasks),[e.newTask])}):t})});case"TodoList/Reducer/SET_TASKS":return Object(l.a)({},t,{todolists:t.todolists.map(function(t){return t.id===e.todolistId?Object(l.a)({},t,{tasks:e.tasks}):t})});case"TodoList/Reducer/CHANGE_TASK":return Object(l.a)({},t,{todolists:t.todolists.map(function(t){return t.id===e.todolistId?Object(l.a)({},t,{tasks:t.tasks.map(function(t){return t.id===e.taskId?Object(l.a)({},t,{},e.obj):t})}):t})});case"TodoList/Reducer/CHANGE_TODOLIST":return Object(l.a)({},t,{todolists:t.todolists.map(function(t){return t.id===e.todolistId?Object(l.a)({},t):t})});case"TodoList/Reducer/DELETE_TASK":return Object(l.a)({},t,{todolists:t.todolists.map(function(t){return t.id===e.todolistId?Object(l.a)({},t,{tasks:t.tasks.filter(function(t){return t.id!==e.taskId})}):t})});default:return t}},auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"TodoList/Reducer/SET_AUTH_USER_DATA":return Object(l.a)({},t,{},e.payload);default:return t}},form:j.a}),D=Object(s.d)(N,Object(s.a)(C.a));window.store=D;var y=D,F=n(16),H=n(8),M=n(9),R=n(10),x=n(114),K=n.n(x),V=n(40),U=n.n(V),B=n(244),P=n(243),W=function(t){if(!t)return"Field is required"},G=function(t){return function(e){if(e.length>t)return"Max length is ".concat(t," symbols")}},Y=n(116),J=n(73),Z=n.n(J),z=function(t){var e=t.input,n=t.meta,o=Object(Y.a)(t,["input","meta"]),i=n.touched&&n.error;return a.a.createElement("div",{className:Z.a.formControl+" "+(i&&Z.a.error)},a.a.createElement("input",Object.assign({},e,o)),i&&a.a.createElement("span",null,n.error))},Q=n(24),q=G(20),X=G(40),$=Object(P.a)({form:"login"})(function(t){return a.a.createElement("form",{onSubmit:t.handleSubmit,className:U.a.loginForm},a.a.createElement(B.a,{component:z,name:"email",placeholder:"Email",validate:[W,X]}),a.a.createElement(B.a,{component:z,name:"password",type:"password",placeholder:"Password",validate:[W,q]}),a.a.createElement("div",null,a.a.createElement(B.a,{component:z,type:"checkbox",name:"rememberMe"}),"remember me"),a.a.createElement("button",null,"Login"))}),tt=Object(F.b)(function(t){return{isAuth:t.auth.isAuth}},{login:function(t,e,n){return function(o){b(t,e,n).then(function(t){0===t.resultCode&&o(w())})}}})(function(t){return t.isAuth?a.a.createElement(Q.a,{to:"/todolist"}):a.a.createElement("div",{className:U.a.login},a.a.createElement("div",{className:U.a.loginTitle},"Login"),a.a.createElement($,{onSubmit:function(e){t.login(e.email,e.password,e.rememberMe)}}),a.a.createElement("div",{className:U.a.testData},"\u0422\u0435\u0441\u0442\u043e\u0432\u044b\u0435 e-mail \u0438 password:",a.a.createElement("div",null,"E-mail: ",a.a.createElement("span",null,"free@samuraijs.com")),a.a.createElement("div",null,"Password: ",a.a.createElement("span",null,"free"))))}),et=n(31),nt=n(41),ot=n.n(nt),at=n(42),it=n.n(at),rt=n(54),st=n.n(rt),ct=function(t){Object(R.a)(n,t);var e=Object(M.a)(n);function n(t){var o;return Object(H.a)(this,n),(o=e.call(this,t)).state={editMode:!1,title:o.props.task.title},o.activateEditMode=function(){o.setState({editMode:!0})},o.deactiveEditMode=function(){o.props.changeTitle(o.props.task.id,o.state.title),o.setState({editMode:!1})},o.onIsDoneChanged=function(t){var e=t.currentTarget.checked?2:0;o.props.changeIsDoneStatus(o.props.task.id,e)},o.onTitleChanged=function(t){o.setState({title:t.currentTarget.value})},o.onDeleteTask=function(){o.props.deleteTask(o.props.task.id)},o.render=function(){var t=o.props.task.status?"".concat(it.a.done):"";return a.a.createElement("div",{className:it.a.todoListTask},a.a.createElement("input",{type:"checkbox",id:"check",checked:2===o.props.task.status,onChange:o.onIsDoneChanged}),a.a.createElement("div",{className:it.a.todoListTaskItem},a.a.createElement("div",null,o.state.editMode?a.a.createElement("input",{onBlur:o.deactiveEditMode,onChange:o.onTitleChanged,autoFocus:!0,value:o.state.title}):a.a.createElement("span",{onClick:o.activateEditMode,className:t},o.props.task.title)),a.a.createElement("button",{className:it.a.todoListTaskDelete,onClick:o.onDeleteTask},a.a.createElement("img",{src:st.a,alt:"basket"}))))},o}return n}(a.a.Component),lt=function(t){Object(R.a)(n,t);var e=Object(M.a)(n);function n(t){var o;return Object(H.a)(this,n),(o=e.call(this,t)).render=function(){var t=o.props.tasks.map(function(t){return a.a.createElement(ct,{key:t.id,task:t,changeIsDoneStatus:o.props.changeIsDoneStatus,changeTitle:o.props.changeTitle,deleteTask:o.props.deleteTask})});return a.a.createElement("div",null,t)},o}return n}(a.a.Component),ut=n(43),dt=n.n(ut),pt=function(t){Object(R.a)(n,t);var e=Object(M.a)(n);function n(){var t;Object(H.a)(this,n);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).state={isHidden:!1},t.onAllFilterClick=function(){t.props.changeFilter("All")},t.onComplitedFilterClick=function(){t.props.changeFilter("Completed")},t.onActiveFilterClick=function(){t.props.changeFilter("Active")},t.onHideFilterClick=function(){t.setState({isHidden:!0})},t.onShowFilterClick=function(){t.setState({isHidden:!1})},t.render=function(){var e="All"===t.props.filterValue?"".concat(dt.a.filterActive):"",n="Completed"===t.props.filterValue?"".concat(dt.a.filterActive):"",o="Active"===t.props.filterValue?"".concat(dt.a.filterActive):"";return a.a.createElement("div",{className:dt.a.todoListFooter},!t.state.isHidden&&a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){t.onAllFilterClick()},className:e},"All"),a.a.createElement("button",{onClick:function(){t.onComplitedFilterClick()},className:n},"Completed"),a.a.createElement("button",{onClick:function(){t.onActiveFilterClick()},className:o},"Active")),!t.state.isHidden&&a.a.createElement("span",{onClick:function(){t.onHideFilterClick()}},"hide"),t.state.isHidden&&a.a.createElement("span",{onClick:function(){t.onShowFilterClick()}},"show"))},t}return n}(a.a.Component),ft=n(77),mt=n.n(ft),Tt=function(t){Object(R.a)(n,t);var e=Object(M.a)(n);function n(t){var o;return Object(H.a)(this,n),(o=e.call(this,t)).state={error:!1,title:""},o.onInputTextChange=function(t){o.setState({error:!1,title:t.currentTarget.value})},o.onAddNewItemTitle=function(){var t=o.state.title;o.setState({title:""}),""===t?o.setState({error:!0}):(o.setState({error:!1}),o.props.addNewTitle(t))},o.onPressEnter=function(t){"Enter"===t.key&&o.onAddNewItemTitle()},o.render=function(){var t=o.state.error?"error":"";return a.a.createElement("div",{className:mt.a.todoListHeader},a.a.createElement("div",{className:mt.a.todoListNewTaskForm},a.a.createElement("input",{type:"text",placeholder:"New item name",className:t,onChange:o.onInputTextChange,onKeyPress:o.onPressEnter,value:o.state.title}),a.a.createElement("button",{onClick:function(){o.onAddNewItemTitle()}},"Add")))},o}return n}(a.a.Component),ht=n(32),kt=n.n(ht),vt=n(78),Et=n.n(vt),gt=function(t){Object(R.a)(n,t);var e=Object(M.a)(n);function n(t){var o;return Object(H.a)(this,n),(o=e.call(this,t)).state={title:o.props.title,editMode:!1},o.activeEditMode=function(){o.setState({editMode:!0})},o.deactiveEditMode=function(){o.props.changeTodolist(o.state.title),o.setState({editMode:!1})},o.changeTodolistTitle=function(t){o.setState({title:t.currentTarget.value})},o.render=function(){return a.a.createElement("div",null,o.state.editMode?a.a.createElement("input",{onBlur:o.deactiveEditMode,autoFocus:!0,value:o.state.title,onChange:o.changeTodolistTitle,className:Et.a.todolistTitleInput}):a.a.createElement("h3",{className:Et.a.todolistHeaderTitle,onClick:o.activeEditMode},o.state.title))},o}return n}(a.a.Component),bt=function(t){Object(R.a)(n,t);var e=Object(M.a)(n);function n(t){var o;return Object(H.a)(this,n),(o=e.call(this,t)).state={filterValue:"All",nextTaskId:3},o.restoreState=function(){o.props.loadTasks(o.props.id)},o.addTask=function(t){o.props.addTask(t,o.props.id)},o.changeFilter=function(t){o.setState({filterValue:t})},o.changeTask=function(t,e){var n=o.props.tasks.find(function(e){return e.id===t}),a=Object(l.a)({},n,{},e);o.props.changeTask(t,o.props.id,a,e)},o.changeTodolist=function(t){o.props.changeTodolist(o.props.id,t)},o.changeIsDoneStatus=function(t,e){o.changeTask(t,{status:e})},o.changeTitle=function(t,e){o.changeTask(t,{title:e})},o.deleteTask=function(t){o.props.deleteTask(o.props.id,t)},o.deleteTodolist=function(){o.props.deleteTodolist(o.props.id)},o.render=function(){var t=o.props.tasks,e=void 0===t?[]:t;return a.a.createElement("div",{className:kt.a.App},a.a.createElement("div",{className:kt.a.todoList},a.a.createElement("div",{className:kt.a.todoListHeader},a.a.createElement(gt,{title:o.props.title,changeTodolist:o.changeTodolist}),a.a.createElement("button",{onClick:function(){o.deleteTodolist()},className:kt.a.todoListDeleteButton},a.a.createElement("img",{src:st.a,alt:"basket"}))),a.a.createElement(Tt,{addNewTitle:o.addTask}),a.a.createElement("div",{className:kt.a.todoListContent},a.a.createElement(lt,{changeIsDoneStatus:o.changeIsDoneStatus,changeTitle:o.changeTitle,changeTask:o.changeTask,deleteTask:o.deleteTask,tasks:e.filter(function(t){return"All"===o.state.filterValue?2:"Active"===o.state.filterValue?0===t.status:2===t.status})})),a.a.createElement(pt,{changeFilter:o.changeFilter,filterValue:o.state.filterValue})))},o}return Object(et.a)(n,[{key:"componentDidMount",value:function(){this.restoreState()}}]),n}(a.a.Component),_t=Object(F.b)(null,function(t){return{addTask:function(e,n){t(A(e,n))},loadTasks:function(e){t(function(t){return function(e){f(t).then(function(n){var o=n.data.items;e(function(t,e){return{type:"TodoList/Reducer/SET_TASKS",tasks:t,todolistId:e}}(o,t))})}}(e))},changeTask:function(e,n,o,a){t(function(t,e,n,o){return function(a){m(n,o).then(function(n){a(function(t,e,n){return{type:"TodoList/Reducer/CHANGE_TASK",taskId:t,obj:e,todolistId:n}}(t,o,e))})}}(e,n,o,a))},deleteTask:function(e,n){t(function(t,e){return function(n){T(e).then(function(o){n(function(t,e){return{type:"TodoList/Reducer/DELETE_TASK",todolistId:t,taskId:e}}(t,e))})}}(e,n))},deleteTodolist:function(e){t(function(t){return function(e){h(t).then(function(n){e(function(t){return{type:"TodoList/Reducer/DELETE_TODOLIST",todolistId:t}}(t))})}}(e))},changeTodolist:function(e,n){t(function(t,e){return function(n){E(t,e).then(function(o){n(function(t,e){return{type:"TodoList/Reducer/CHANGE_TODOLIST",todolistId:t,newTodolistTitle:e}}(t,e))})}}(e,n))}}})(bt),Lt=function(t){Object(R.a)(n,t);var e=Object(M.a)(n);function n(){var t;Object(H.a)(this,n);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).state={newTodoListId:0},t.addNewTodolist=function(e){t.props.addTodolist(e)},t}return Object(et.a)(n,[{key:"render",value:function(){var t=this.props.todolists.map(function(t){return a.a.createElement(_t,{key:t.id,id:t.id,title:t.title,tasks:t.tasks})});return a.a.createElement("div",{className:ot.a.item},a.a.createElement("div",{className:ot.a.itemHeader},a.a.createElement(Tt,{addNewTitle:this.addNewTodolist}),this.props.isAuth?a.a.createElement("div",null,this.props.login,a.a.createElement("div",{onClick:this.props.logout,className:ot.a.logout},"logout")):a.a.createElement("div",null,"Login")),a.a.createElement("div",{className:ot.a.App},t))}}]),n}(a.a.Component),Ot=function(t){Object(R.a)(n,t);var e=Object(M.a)(n);function n(){return Object(H.a)(this,n),e.apply(this,arguments)}return Object(et.a)(n,[{key:"componentDidMount",value:function(){this.props.setTodolists(),this.props.setAuthUserData()}},{key:"render",value:function(){return this.props.isAuth?a.a.createElement(Lt,this.props):a.a.createElement(Q.a,{to:"/login"})}}]),n}(a.a.Component),At=Object(F.b)(function(t){return{todolists:t.reducer.todolists,isAuth:t.auth.isAuth,login:t.auth.login}},function(t){return{addTodolist:function(e){var n,o=(n=e,function(t){v(n).then(function(e){var n=e.data.data.item;t({type:"TodoList/Reducer/ADD_TODOLIST",newTodoList:n})})});t(o)},setTodolists:function(e){var n=function(t){k().then(function(e){t({type:"TodoList/Reducer/SET_TODOLISTS",todolists:e.data})})};t(n)},setAuthUserData:function(e,n,o){var a=w();t(a)},logout:function(){var e=function(t){_().then(function(e){0===e.resultCode&&t(S(null,null,null,!1))})};t(e)}}})(Ot),jt=function(t){Object(R.a)(n,t);var e=Object(M.a)(n);function n(){var t;Object(H.a)(this,n);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).render=function(){return a.a.createElement("div",{className:K.a.appWrapper},a.a.createElement(Q.b,{path:"/login",render:function(){return a.a.createElement(tt,null)}}),a.a.createElement(Q.b,{path:"/todolist",render:function(){return a.a.createElement(At,null)}}))},t}return n}(a.a.Component),Ct=n(36);r.a.render(a.a.createElement(F.a,{store:y},a.a.createElement(Ct.a,null,a.a.createElement(jt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},32:function(t,e,n){t.exports={App:"TodoList_App__JRQZK",todoList:"TodoList_todoList__1d61V",todoListHeader:"TodoList_todoListHeader__1ISYI",todoListDeleteButton:"TodoList_todoListDeleteButton__3t31C",todoListContent:"TodoList_todoListContent__24YKH"}},40:function(t,e,n){t.exports={login:"Login_login__YlSvz",loginForm:"Login_loginForm__1o_uS",testData:"Login_testData__2CEyc"}},41:function(t,e,n){t.exports={App:"Item_App__cf8h7",error:"Item_error__1FKAG",itemHeader:"Item_itemHeader__2PhHp",logout:"Item_logout__3xmgV"}},42:function(t,e,n){t.exports={todoListTask:"TodoListTask_todoListTask__1U9ZW",done:"TodoListTask_done__1snSa",todoListTaskDelete:"TodoListTask_todoListTaskDelete__2hUsi",todoListTaskItem:"TodoListTask_todoListTaskItem__2KcQb"}},43:function(t,e,n){t.exports={filterActive:"TodoListFooter_filterActive__38KvZ"}},54:function(t,e,n){t.exports=n.p+"static/media/basket.491ecf80.svg"},73:function(t,e,n){t.exports={formControl:"FormControl_formControl__itaXp",error:"FormControl_error__1cbW_"}},77:function(t,e,n){t.exports={todoListNewTaskForm:"TodoListInputForm_todoListNewTaskForm__iy0Eg"}},78:function(t,e,n){}},[[118,1,2]]]);
//# sourceMappingURL=main.3cf586a7.chunk.js.map